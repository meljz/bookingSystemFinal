<!-- Header stays the same -->
<nav class="bg-black z-50 flex items-center justify-between w-full py-4 px-6 md:px-16 lg:px-24 xl:px-32 backdrop-blur text-white text-lg">
  <h1>LOGO</h1>
  <div class="hidden md:flex items-center gap-8">
    <a href="/" class="hover:text-slate-500">Home</a>
    <a href="/service" class="hover:text-slate-500">Services</a>
    <a href="/appointment" class="hover:text-slate-500">Appointment</a>
  </div>

  <div class="hidden md:block">
            <a class=" text-white text-lg m-2">CUser: {{ authService.isLoggedIn }}</a>

            <a class="hover:bg-slate-100 transition px-6 py-2 border border-indigo-600 rounded-md cursor-pointer" (click)="logout()">logout</a>
        </div>

  <button id="open-menu" class="md:hidden active:scale-90">
    <!-- menu icon -->
  </button>
</nav>

<!-- Main layout: sidebar + calendar -->
<div class="flex flex-row min-h-screen bg-gray-500">
  <!-- Sidebar -->
  <aside class="w-80 bg-gray-400 p-6 border-r border-gray-300">

    @if(bAppoint){
      <h1 class = "text-white" > Schedule on: {{ selectedDate | date:'yyyy-MM-dd' }} </h1>

      <div class="p-4 bg-gray-100 rounded-lg text-black border p-2">
        <h1 class="font-bold mb-2">Please fill out the form</h1>

        <form (ngSubmit)="confirmBooking()" class = 'flex flex-col gap-4'>
            <input [(ngModel)]="name" name ="name" placeholder="Name" class="border border-gray-300 rounded-md p-2 w-full" >

             <input [(ngModel)]="age" name ="age" placeholder="Age" class="border border-gray-300 rounded-md p-2 w-full" >

             <input [(ngModel)]="phone" name ="phone" placeholder="Phone Number" class="border border-gray-300 rounded-md p-2 w-full" >
            
             <textarea [(ngModel)]="design" name ="tattooDesign" placeholder="tattooDesign" class="border border-gray-300 rounded-md p-2 w-full" ></textarea>

            <button type="submit" class="px-4 py-1 bg-blue-400 text-white rounded hover:bg-blue-700 m-2">
                Confirm
            </button>
            <button type="button" class="px-4 py-1 bg-gray-200 text-black rounded hover:bg-amber-500" (click)="cancelBooking()">
                cancel
            </button>
        </form>
      </div>
    }

  </aside>

  <!-- Calendar -->
  <main class="flex-1 p-6 flex items-center justify-center">
    <div class="bg-gray-300 rounded-lg shadow-lg p-4 w-full max-w-5xl border-2 border-purple-500">
      <!-- Weekday Labels -->
      <div class="grid grid-cols-7 text-center font-medium text-gray-700 mb-2 border border-orange-500">
        <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
      </div>

      <!-- Days Grid -->
      <div class="grid grid-cols-7 gap-4 text-center border-2 border-blue-500 p-4">
        @for (day of days; track day) {
          <div (click)="bookAppointment(day)" class="flex flex-col items-start justify-start h-35 bg-white p-2 gap-2 rounded-lg hover:bg-green-200 transition">

            <div class="font-semibold">{{ day }}</div>

            <!--<button " class="cursor-pointer rounded-full p-1 text-sm">avail</button>-->
            

            <!-- Show booked appointments -->
            @for (appt of getAppointmentsForDay(day); track appt.id) {
              <div class="bg-blue-100 text-xs px-2 py-1 rounded">Booked by: {{ appt.name }}</div>
            }
          </div>
        }

        
        <!--@for (day of days; track day){
          <div class="flex flex-col items-start justify-start h-32 bg-white p-4 gap-2 rounded-lg hover:bg-green-200 transition">
            <div class="font-semibold">{{ day }}</div>
            <button (click)="bookAppointment(day)" class="cursor-pointer rounded-full p-1 text-sm">avail</button>
        
          </div>
        }-->  
          
      </div>

      <button (click)="getUser()" class="border-2 border-blue-500 bg-red-500 text-white">get user</button>
      
      @for (appt of appointments; track appt){
        <div class = "bg-white border-2 border-blue-500 p-2">
          <p class="">Appointment for: {{ appt.name }}</p>
          <p class="">Info: {{ appt.age}} - {{ appt.phone }} - {{ appt.design}} </p>
          <button class="bg-orange-200 cursor-pointer text-red-500 hover:text-red-700" (click)="deleteAppointment(appt.id)"> delete </button>
        </div>
      }


    
    </div>
  </main>
</div>

